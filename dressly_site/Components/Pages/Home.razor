@page "/home"
@inject HttpClient HttpClient
@inject NavigationManager Navigation

<h3>הארון הווירטואלי שלי</h3>

<div class="container">
    <!-- אם אין פריטים בארון -->
    @if (!clothes.Any())
    {
        <p>הארון שלך ריק, העלה פריטים כדי להתחיל.</p>
    }
    else
    {
        <!-- טבלה או רשימה של פרטי הלבוש -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>שם פריט</th>
                    <th>קטגוריה</th>
                    <th>צבע</th>
                    <th>פעולות</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in clothes)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>@item.Category</td>
                        <td>@item.Color</td>
                        <td>
                            <button class="btn btn-info btn-sm" @onclick="() => EditClothing(item.Id)">ערוך</button>
                            <button class="btn btn-danger btn-sm" @onclick="() => DeleteClothing(item.Id)">מחק</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>

@code {
    private List<ClothingItem> clothes = new List<ClothingItem>();

    // טוען את פרטי הלבוש מה-API או מקור נתונים אחר
    protected override async Task OnInitializedAsync()
    {
        clothes = await HttpClient.GetFromJsonAsync<List<ClothingItem>>("api/clothing");
    }

    // פונקציה לעריכת פריט לבוש
    private void EditClothing(int itemId)
    {
        // כאן תוכל להוסיף את הקוד לעריכת פריט הלבוש
        // לדוגמה, ניווט לדף עריכה עם ה-ID של הפריט
        Navigation.NavigateTo($"/edit/{itemId}");
    }

    // פונקציה למחיקת פריט לבוש
    private async Task DeleteClothing(int itemId)
    {
        var response = await HttpClient.DeleteAsync($"api/clothing/{itemId}");
        if (response.IsSuccessStatusCode)
        {
            clothes = await HttpClient.GetFromJsonAsync<List<ClothingItem>>("api/clothing");
        }
    }

    // מודל של פריט לבוש
    public class ClothingItem
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Category { get; set; }
        public string Color { get; set; }
    }
}
